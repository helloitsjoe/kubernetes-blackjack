module.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s="QfWi")}({HteQ:function(t,e){t.exports=require("preact")},"JuI/":function(t,e,n){},QfWi:function(t,e,n){"use strict";n.r(e);n("JuI/");var r,o,i,c=n("HteQ"),u=[],a=c.options.__r,l=c.options.diffed,f=c.options.__c,s=c.options.unmount;function _(t){c.options.__h&&c.options.__h(o);var e=o.__H||(o.__H={__:[],__h:[]});return t>=e.__.length&&e.__.push({}),e.__[t]}function p(t){return d(g,t)}function d(t,e,n){var i=_(r++);return i.__c||(i.__c=o,i.__=[n?n(e):g(void 0,e),function(e){var n=t(i.__[0],e);i.__[0]!==n&&(i.__[0]=n,i.__c.setState({}))}]),i.__}function h(t,e){var n=_(r++);j(n.__H,e)&&(n.__=t,n.__H=e,o.__H.__h.push(n))}function v(t){return b((function(){return{current:t}}),[])}function b(t,e){var n=_(r++);return j(n.__H,e)?(n.__H=e,n.__h=t,n.__=t()):n.__}function m(){u.some((function(t){if(t.__P)try{t.__H.__h.forEach(y),t.__H.__h.forEach(O),t.__H.__h=[]}catch(e){return t.__H.__h=[],c.options.__e(e,t.__v),!0}})),u=[]}function y(t){t.t&&t.t()}function O(t){var e=t.__();"function"==typeof e&&(t.t=e)}function j(t,e){return!t||e.some((function(e,n){return e!==t[n]}))}function g(t,e){return"function"==typeof e?e(t):e}function N(t,e){for(var n in e)t[n]=e[n];return t}function A(t,e){for(var n in t)if("__source"!==n&&!(n in e))return!0;for(var r in e)if("__source"!==r&&t[r]!==e[r])return!0;return!1}c.options.__r=function(t){a&&a(t),r=0,(o=t.__c).__H&&(o.__H.__h.forEach(y),o.__H.__h.forEach(O),o.__H.__h=[])},c.options.diffed=function(t){l&&l(t);var e=t.__c;if(e){var n=e.__H;n&&n.__h.length&&(1!==u.push(e)&&i===c.options.requestAnimationFrame||((i=c.options.requestAnimationFrame)||function(t){var e,n=function(){clearTimeout(r),cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);"undefined"!=typeof window&&(e=requestAnimationFrame(n))})(m))}},c.options.__c=function(t,e){e.some((function(t){try{t.__h.forEach(y),t.__h=t.__h.filter((function(t){return!t.__||O(t)}))}catch(n){e.some((function(t){t.__h&&(t.__h=[])})),e=[],c.options.__e(n,t.__v)}})),f&&f(t,e)},c.options.unmount=function(t){s&&s(t);var e=t.__c;if(e){var n=e.__H;if(n)try{n.__.forEach((function(t){return t.t&&t.t()}))}catch(t){c.options.__e(t,e.__v)}}};!function(t){var e,n;function r(e){var n;return(n=t.call(this,e)||this).isPureReactComponent=!0,n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,r.prototype.shouldComponentUpdate=function(t,e){return A(this.props,t)||A(this.state,e)}}(c.Component);var P=c.options.__b;function C(t){function e(e){var n=N({},e);return delete n.ref,t(n,e.ref)}return e.prototype.isReactComponent=e.t=!0,e.displayName="ForwardRef("+(t.displayName||t.name)+")",e}c.options.__b=function(t){t.type&&t.type.t&&t.ref&&(t.props.ref=t.ref,t.ref=null),P&&P(t)};var w=function(t,e){return t?Object(c.toChildArray)(t).reduce((function(t,n,r){return t.concat(e(n,r))}),[]):null},k=(c.toChildArray,c.options.__e);function E(t){return t&&((t=N({},t)).__c=null,t.__k=t.__k&&t.__k.map(E)),t}function S(){this.__u=0,this.o=null,this.__b=null}function I(t){var e=t.__.__c;return e&&e.u&&e.u(t)}function H(){this.i=null,this.l=null}c.options.__e=function(t,e,n){if(t.then)for(var r,o=e;o=o.__;)if((r=o.__c)&&r.__c)return r.__c(t,e.__c);k(t,e,n)},(S.prototype=new c.Component).__c=function(t,e){var n=this;null==n.o&&(n.o=[]),n.o.push(e);var r=I(n.__v),o=!1,i=function(){o||(o=!0,r?r(c):c())};e.__c=e.componentWillUnmount,e.componentWillUnmount=function(){i(),e.__c&&e.__c()};var c=function(){var t;if(!--n.__u)for(n.__v.__k[0]=n.state.u,n.setState({u:n.__b=null});t=n.o.pop();)t.forceUpdate()};n.__u++||n.setState({u:n.__b=n.__v.__k[0]}),t.then(i,i)},S.prototype.render=function(t,e){return this.__b&&(this.__v.__k[0]=E(this.__b),this.__b=null),[Object(c.createElement)(c.Component,null,e.u?null:t.children),e.u&&t.fallback]};var L=function(t,e,n){if(++n[1]===n[0]&&t.l.delete(e),t.props.revealOrder&&("t"!==t.props.revealOrder[0]||!t.l.size))for(n=t.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.i=n=n[2]}};(H.prototype=new c.Component).u=function(t){var e=this,n=I(e.__v),r=e.l.get(t);return r[0]++,function(o){var i=function(){e.props.revealOrder?(r.push(o),L(e,t,r)):o()};n?n(i):i()}},H.prototype.render=function(t){this.i=null,this.l=new Map;var e=Object(c.toChildArray)(t.children);t.revealOrder&&"b"===t.revealOrder[0]&&e.reverse();for(var n=e.length;n--;)this.l.set(e[n],this.i=[1,0,this.i]);return t.children},H.prototype.componentDidUpdate=H.prototype.componentDidMount=function(){var t=this;t.l.forEach((function(e,n){L(t,n,e)}))};!function(){function t(){}var e=t.prototype;e.getChildContext=function(){return this.props.context},e.render=function(t){return t.children}}();var T=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;c.Component.prototype.isReactComponent={};var U="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;var x=c.options.event;function W(t,e){t["UNSAFE_"+e]&&!t[e]&&Object.defineProperty(t,e,{configurable:!1,get:function(){return this["UNSAFE_"+e]},set:function(t){this["UNSAFE_"+e]=t}})}c.options.event=function(t){x&&(t=x(t)),t.persist=function(){};var e=!1,n=!1,r=t.stopPropagation;t.stopPropagation=function(){r.call(t),e=!0};var o=t.preventDefault;return t.preventDefault=function(){o.call(t),n=!0},t.isPropagationStopped=function(){return e},t.isDefaultPrevented=function(){return n},t.nativeEvent=t};var D={configurable:!0,get:function(){return this.class}},Y=c.options.vnode;c.options.vnode=function(t){t.$$typeof=U;var e=t.type,n=t.props;if(e){if(n.class!=n.className&&(D.enumerable="className"in n,null!=n.className&&(n.class=n.className),Object.defineProperty(n,"className",D)),"function"!=typeof e){var r,o,i;for(i in n.defaultValue&&void 0!==n.value&&(n.value||0===n.value||(n.value=n.defaultValue),delete n.defaultValue),Array.isArray(n.value)&&n.multiple&&"select"===e&&(Object(c.toChildArray)(n.children).forEach((function(t){-1!=n.value.indexOf(t.props.value)&&(t.props.selected=!0)})),delete n.value),n)if(r=T.test(i))break;if(r)for(i in o=t.props={},n)o[T.test(i)?i.replace(/[A-Z0-9]/,"-$&").toLowerCase():i]=n[i]}!function(e){var n=t.type,r=t.props;if(r&&"string"==typeof n){var o={};for(var i in r)/^on(Ani|Tra|Tou)/.test(i)&&(r[i.toLowerCase()]=r[i],delete r[i]),o[i.toLowerCase()]=i;if(o.ondoubleclick&&(r.ondblclick=r[o.ondoubleclick],delete r[o.ondoubleclick]),o.onbeforeinput&&(r.onbeforeinput=r[o.onbeforeinput],delete r[o.onbeforeinput]),o.onchange&&("textarea"===n||"input"===n.toLowerCase()&&!/^fil|che|ra/i.test(r.type))){var c=o.oninput||"oninput";r[c]||(r[c]=r[o.onchange],delete r[o.onchange])}}}(),"function"==typeof e&&!e.m&&e.prototype&&(W(e.prototype,"componentWillMount"),W(e.prototype,"componentWillReceiveProps"),W(e.prototype,"componentWillUpdate"),e.m=!0)}Y&&Y(t)};c.createElement,c.createContext,c.createRef,c.Fragment,c.Component;var G=function(){if("undefined"!=typeof window&&window.location.search){var t=M(window.location.search);if(t)return t}return console.log("process.env.MINIKUBE:","true"),"http://192.168.64.2:32566/game"};function F(t){var e=document.querySelectorAll("button"),n=Array.from(e).findIndex((function(e){return t.target.isEqualNode(e)}));if("j"===t.key){var r=n+1;r<e.length&&e[r].focus()}if("k"===t.key){var o=n-1;o>-1&&e[o].focus()}}var M=function(t){var e=t.replace("?","").split("&").reduce((function(t,e){var n=e.split("="),r=n[0],o=n[1];return t[r]=o,t}),{}),n=e.host,r=e.port;return n&&r&&"http://"+n+":"+r+"/game"};function R(){return(R=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function K(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?q(Object(n),!0).forEach((function(e){B(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function B(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}console.log("URL:",G());var J={WAITING:"WAITING...",PLAYING:"PLAYING...",BUST:"BUST!",BLACKJACK:"BLACKJACK!",WIN:"YOU WIN!",LOSE:"YOU LOSE!",TIE:"YOU TIE!"},Q=function(t){return fetch(G(),{method:"POST",body:JSON.stringify({type:t}),headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){if(t.message)throw new Error(res.message);return console.log(t.data),t.data||t})).catch(console.error)},V=function(t){return t.reduce((function(t,e){return t+e.value}),0)};var $=C((function(t,e){return Object(c.h)("button",R({},t,{className:"control-button",ref:e}),t.children)}));function z(t){var e=t.cards;return Object(c.h)("div",{className:"cards"},e.map((function(t){return Object(c.h)("div",{key:t},Object(c.h)(Z,t))})))}function Z(t){var e=t.face,n=void 0===e?"King":e,r=t.suit,o=void 0===r?"Clubs":r,i={clubs:"black",spades:"black",diamonds:"red",hearts:"red"}[o],u={clubs:"♣",spades:"♠",diamonds:"♦",hearts:"♥"}[o]||"?";return Object(c.h)("div",{className:"card-space"},Object(c.h)("div",{className:"card card-"+i},Object(c.h)("p",null,n),Object(c.h)("h2",null,u)))}e.default=function(){var t=p([]),e=t[0],n=t[1],r=p([]),o=r[0],i=r[1],u=p("WAITING"),a=u[0],l=u[1],f=v(),s=v();return h((function(){"PLAYING"===a?s.current.focus():f.current.focus()}),[a]),h((function(){return document.addEventListener("keypress",F),function(){return document.removeEventListener("keypress",F)}}),[]),Object(c.h)("div",{className:"app"},Object(c.h)("div",{className:"controls"},Object(c.h)($,{onClick:function(){return Q("DEAL").then((function(t){var e;n(t.player),i([K({},(e=t.dealer)[0],{value:0,face:"",suit:""})].concat(e.slice(1))),l("PLAYING")}))},ref:f},"Deal"),Object(c.h)($,{ref:s,disabled:"PLAYING"!==a,onClick:function(){return Q("HIT").then((function(t){n((function(e){return[].concat(e,[t.card])})),l(t.status)}))}},"Hit"),Object(c.h)($,{disabled:"PLAYING"!==a,onClick:function(){return Q("STAY").then((function(t){console.log("data:",t),i(t.dealer_cards),l(t.status)}))}},"Stay"),Object(c.h)("h2",null,J[a]),"WAITING"!==a&&Object(c.h)("table",{className:"totals"},Object(c.h)("tr",null,Object(c.h)("td",null,"You:"),Object(c.h)("td",{className:"totals-scores"},V(e))),Object(c.h)("tr",null,Object(c.h)("td",null,"Dealer:"),Object(c.h)("td",{className:"totals-scores"},V(o))))),Object(c.h)("div",{className:"game"},Object(c.h)(z,{cards:e}),Object(c.h)(z,{cards:o})))}}});
//# sourceMappingURL=ssr-bundle.js.map