module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s="QfWi")}({HteQ:function(e,t){e.exports=require("preact")},"JuI/":function(e,t,n){},QfWi:function(e,t,n){"use strict";n.r(t);n("JuI/");var r,o,a,c=n("HteQ"),i=[],u=c.options.__r,l=c.options.diffed,s=c.options.__c,f=c.options.unmount;function p(e){c.options.__h&&c.options.__h(o);var t=o.__H||(o.__H={__:[],__h:[]});return e>=t.__.length&&t.__.push({}),t.__[e]}function _(e,t,n){var a=p(r++);return a.__c||(a.__c=o,a.__=[n?n(t):j(void 0,t),function(t){var n=e(a.__[0],t);a.__[0]!==n&&(a.__[0]=n,a.__c.setState({}))}]),a.__}function d(e,t){var n=p(r++);O(n.__H,t)&&(n.__=e,n.__H=t,o.__H.__h.push(n))}function h(e){return v((function(){return{current:e}}),[])}function v(e,t){var n=p(r++);return O(n.__H,t)?(n.__H=t,n.__h=e,n.__=e()):n.__}function b(){i.some((function(e){if(e.__P)try{e.__H.__h.forEach(y),e.__H.__h.forEach(m),e.__H.__h=[]}catch(t){return e.__H.__h=[],c.options.__e(t,e.__v),!0}})),i=[]}function y(e){e.t&&e.t()}function m(e){var t=e.__();"function"==typeof t&&(e.t=t)}function O(e,t){return!e||t.some((function(t,n){return t!==e[n]}))}function j(e,t){return"function"==typeof t?t(e):t}function g(e,t){for(var n in t)e[n]=t[n];return e}function C(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}c.options.__r=function(e){u&&u(e),r=0,(o=e.__c).__H&&(o.__H.__h.forEach(y),o.__H.__h.forEach(m),o.__H.__h=[])},c.options.diffed=function(e){l&&l(e);var t=e.__c;if(t){var n=t.__H;n&&n.__h.length&&(1!==i.push(t)&&a===c.options.requestAnimationFrame||((a=c.options.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(r),cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);"undefined"!=typeof window&&(t=requestAnimationFrame(n))})(b))}},c.options.__c=function(e,t){t.some((function(e){try{e.__h.forEach(y),e.__h=e.__h.filter((function(e){return!e.__||m(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],c.options.__e(n,e.__v)}})),s&&s(e,t)},c.options.unmount=function(e){f&&f(e);var t=e.__c;if(t){var n=t.__H;if(n)try{n.__.forEach((function(e){return e.t&&e.t()}))}catch(e){c.options.__e(e,t.__v)}}};!function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).isPureReactComponent=!0,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.shouldComponentUpdate=function(e,t){return C(this.props,e)||C(this.state,t)}}(c.Component);var A=c.options.__b;function N(e){function t(t){var n=g({},t);return delete n.ref,e(n,t.ref)}return t.prototype.isReactComponent=t.t=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}c.options.__b=function(e){e.type&&e.type.t&&e.ref&&(e.props.ref=e.ref,e.ref=null),A&&A(e)};var P=function(e,t){return e?Object(c.toChildArray)(e).reduce((function(e,n,r){return e.concat(t(n,r))}),[]):null},T=(c.toChildArray,c.options.__e);function w(e){return e&&((e=g({},e)).__c=null,e.__k=e.__k&&e.__k.map(w)),e}function E(){this.__u=0,this.o=null,this.__b=null}function k(e){var t=e.__.__c;return t&&t.u&&t.u(e)}function S(){this.i=null,this.l=null}c.options.__e=function(e,t,n){if(e.then)for(var r,o=t;o=o.__;)if((r=o.__c)&&r.__c)return r.__c(e,t.__c);T(e,t,n)},(E.prototype=new c.Component).__c=function(e,t){var n=this;null==n.o&&(n.o=[]),n.o.push(t);var r=k(n.__v),o=!1,a=function(){o||(o=!0,r?r(c):c())};t.__c=t.componentWillUnmount,t.componentWillUnmount=function(){a(),t.__c&&t.__c()};var c=function(){var e;if(!--n.__u)for(n.__v.__k[0]=n.state.u,n.setState({u:n.__b=null});e=n.o.pop();)e.forceUpdate()};n.__u++||n.setState({u:n.__b=n.__v.__k[0]}),e.then(a,a)},E.prototype.render=function(e,t){return this.__b&&(this.__v.__k[0]=w(this.__b),this.__b=null),[Object(c.createElement)(c.Component,null,t.u?null:e.children),t.u&&e.fallback]};var I=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};(S.prototype=new c.Component).u=function(e){var t=this,n=k(t.__v),r=t.l.get(e);return r[0]++,function(o){var a=function(){t.props.revealOrder?(r.push(o),I(t,e,r)):o()};n?n(a):a()}},S.prototype.render=function(e){this.i=null,this.l=new Map;var t=Object(c.toChildArray)(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},S.prototype.componentDidUpdate=S.prototype.componentDidMount=function(){var e=this;e.l.forEach((function(t,n){I(e,n,t)}))};!function(){function e(){}var t=e.prototype;t.getChildContext=function(){return this.props.context},t.render=function(e){return e.children}}();var L=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;c.Component.prototype.isReactComponent={};var H="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;var D=c.options.event;function U(e,t){e["UNSAFE_"+t]&&!e[t]&&Object.defineProperty(e,t,{configurable:!1,get:function(){return this["UNSAFE_"+t]},set:function(e){this["UNSAFE_"+t]=e}})}c.options.event=function(e){D&&(e=D(e)),e.persist=function(){};var t=!1,n=!1,r=e.stopPropagation;e.stopPropagation=function(){r.call(e),t=!0};var o=e.preventDefault;return e.preventDefault=function(){o.call(e),n=!0},e.isPropagationStopped=function(){return t},e.isDefaultPrevented=function(){return n},e.nativeEvent=e};var x={configurable:!0,get:function(){return this.class}},W=c.options.vnode;c.options.vnode=function(e){e.$$typeof=H;var t=e.type,n=e.props;if(t){if(n.class!=n.className&&(x.enumerable="className"in n,null!=n.className&&(n.class=n.className),Object.defineProperty(n,"className",x)),"function"!=typeof t){var r,o,a;for(a in n.defaultValue&&void 0!==n.value&&(n.value||0===n.value||(n.value=n.defaultValue),delete n.defaultValue),Array.isArray(n.value)&&n.multiple&&"select"===t&&(Object(c.toChildArray)(n.children).forEach((function(e){-1!=n.value.indexOf(e.props.value)&&(e.props.selected=!0)})),delete n.value),n)if(r=L.test(a))break;if(r)for(a in o=e.props={},n)o[L.test(a)?a.replace(/[A-Z0-9]/,"-$&").toLowerCase():a]=n[a]}!function(t){var n=e.type,r=e.props;if(r&&"string"==typeof n){var o={};for(var a in r)/^on(Ani|Tra|Tou)/.test(a)&&(r[a.toLowerCase()]=r[a],delete r[a]),o[a.toLowerCase()]=a;if(o.ondoubleclick&&(r.ondblclick=r[o.ondoubleclick],delete r[o.ondoubleclick]),o.onbeforeinput&&(r.onbeforeinput=r[o.onbeforeinput],delete r[o.onbeforeinput]),o.onchange&&("textarea"===n||"input"===n.toLowerCase()&&!/^fil|che|ra/i.test(r.type))){var c=o.oninput||"oninput";r[c]||(r[c]=r[o.onchange],delete r[o.onchange])}}}(),"function"==typeof t&&!t.m&&t.prototype&&(U(t.prototype,"componentWillMount"),U(t.prototype,"componentWillReceiveProps"),U(t.prototype,"componentWillUpdate"),t.m=!0)}W&&W(e)};c.createElement,c.createContext,c.createRef,c.Fragment,c.Component;var Y=function(){if("undefined"!=typeof window&&window.location.search){var e=F(window.location.search);if(e)return e}return"http://0.0.0.0:5000/game"},G=function(e,t,n){return fetch(Y(),{method:"POST",body:JSON.stringify({type:e,balance:t,bet:n}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){if(e.message)throw new Error(res.message);return console.log(e.data),e.data||e})).catch(console.error)};function B(e){var t=document.querySelectorAll("button"),n=Array.from(t).findIndex((function(t){return e.target.isEqualNode(t)}));if("j"===e.key){var r=n+1;r<t.length&&t[r].focus()}if("k"===e.key){var o=n-1;o>-1&&t[o].focus()}}var F=function(e){var t=e.replace("?","").split("&").reduce((function(e,t){var n=t.split("="),r=n[0],o=n[1];return e[r]=o,e}),{}),n=t.host,r=t.port;return n&&r&&"http://"+n+":"+r+"/game"};function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}console.log("URL:",Y());var K={WAITING:"WAITING...",PLAYING:"PLAYING...",BUST:"BUST!",BLACKJACK:"BLACKJACK!",WIN:"YOU WIN!",LOSE:"YOU LOSE!",TIE:"YOU TIE!"},$=function(e){return e.reduce((function(e,t){return e+t.value}),0)},Q=function(e,t){console.log("data:",t.data);var n,r=t.data,o=r.player_cards,a=r.player_total,c=r.dealer_cards,i=r.dealer_total,u=r.card,l=r.status,s=r.balance;switch(t.type){case"DEAL":var f=[q({},(n=c)[0],{value:0,face:"",suit:""})].concat(n.slice(1));return q({},e,{playerCards:o,playerTotal:a,dealerCards:f,dealerTotal:$(f),balance:e.balance-e.bet,status:"PLAYING"});case"HIT":return q({},e,{playerCards:[].concat(e.playerCards,[u]),playerTotal:a,status:l});case"STAY":return q({},e,{dealerCards:c,dealerTotal:i,balance:s,status:l});case"DOUBLE":return q({},e,{playerCards:[].concat(e.playerCards,[u]),dealerCards:c,dealerTotal:i,playerTotal:a,balance:s,status:l});default:return e}};var V=N((function(e,t){return Object(c.h)("button",R({},e,{className:"controls-button",ref:t}),e.children)}));function z(e){var t=e.cards;return Object(c.h)("div",{className:"cards"},t.map((function(e){return Object(c.h)("div",{key:e},Object(c.h)(Z,e))})))}function Z(e){var t=e.face,n=void 0===t?"King":t,r=e.suit,o=void 0===r?"Clubs":r,a={clubs:"black",spades:"black",diamonds:"red",hearts:"red"}[o],i={clubs:"♣",spades:"♠",diamonds:"♦",hearts:"♥"}[o]||"?";return Object(c.h)("div",{className:"card-space"},Object(c.h)("div",{"data-testid":"card",className:"card card-"+a},Object(c.h)("p",null,n),Object(c.h)("h2",null,i)))}t.default=function(e){var t=e.send,n=void 0===t?G:t,r=_(Q,{playerCards:[],dealerCards:[],playerTotal:0,dealerTotal:0,status:"WAITING",balance:1e3,bet:50}),o=r[0],a=o.playerCards,i=o.playerTotal,u=o.dealerCards,l=o.dealerTotal,s=o.status,f=o.balance,p=o.bet,v=r[1],b=h(),y=h();d((function(){"PLAYING"===s?y.current.focus():b.current.focus()}),[s]),d((function(){return document.addEventListener("keypress",B),function(){return document.removeEventListener("keypress",B)}}),[]);var m=function(){return n("DEAL",f,p).then((function(e){v({type:"DEAL",data:e})}))};return Object(c.h)("div",{className:"app"},Object(c.h)("div",{className:"controls"},Object(c.h)("h2",null,"$",f),Object(c.h)("form",{onSubmit:function(e){e.preventDefault(),m()}},Object(c.h)("label",{className:"controls-bet"},Object(c.h)("span",null,"Bet: $"),Object(c.h)("input",{className:"controls-betInput",type:"number",step:25,onChange:function(e){return setBet(e.target.value)},value:p}))),Object(c.h)(V,{onClick:m,ref:b},"Deal"),Object(c.h)(V,{ref:y,disabled:"PLAYING"!==s,onClick:function(){return n("HIT").then((function(e){v({type:"HIT",data:e})}))}},"Hit"),Object(c.h)(V,{disabled:"PLAYING"!==s,onClick:function(){return n("STAY").then((function(e){v({type:"STAY",data:e})}))}},"Stay"),Object(c.h)(V,{disabled:"PLAYING"!==s,onClick:function(){return n("DOUBLE").then((function(e){v({type:"DOUBLE",data:e})}))}},"Double Down"),Object(c.h)("h2",null,K[s]),"WAITING"!==s&&Object(c.h)("div",{className:"totals"},Object(c.h)("label",null,"You: ",Object(c.h)("span",{className:"totals-scores"},i)),Object(c.h)("label",null,"Dealer: ",Object(c.h)("span",{className:"totals-scores"},l)))),Object(c.h)("div",{className:"game"},Object(c.h)(z,{cards:a}),Object(c.h)(z,{cards:u})))}}});
//# sourceMappingURL=ssr-bundle.js.map